(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{290:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var n,i,c,s,r,o,l=a(0),d=a.n(l),j=a(47),u=a.n(j),b=(a(289),a(290),a(33)),h=a(267),m=a(434),O=a(436),x=a(431),g=a(266),p=a(75),v=a(25),y=a(19),f=a(440),C=a(425),w=a(437),k=a(433),N=a(444),S=(a(203),a(35)),_=a.n(S),I=a(65),L=a(27),M=a(435),E=a(423),H=a(424),T=a(451),F=a(100),A=a(438),z=Object(A.a)(n||(n=Object(F.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n"]))),Q=Object(A.a)(i||(i=Object(F.a)(["\n    mutation saveHomeCity($homeCity: cityInput!) {\n        saveHomeCity(homeCity: $homeCity) {\n            username\n            homeCity{\n              name\n              region\n              population\n            }\n            savedCities{\n              name\n            }\n            } \n    }\n  \n"]))),P=Object(A.a)(c||(c=Object(F.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n"]))),D=Object(A.a)(s||(s=Object(F.a)(["\n  mutation saveCity($city: cityInput) {\n    saveCity(city: $city) {\n      _id\n      username\n      savedCities {\n        cityId\n        name\n        image\n        healthcare\n        taxation\n        education\n        housing\n        costOfLiving\n        safety\n        environmentalQuality\n        economy\n        population\n        region\n      }\n    }\n  }\n"]))),B=Object(A.a)(r||(r=Object(F.a)(["\n  mutation removeCity($cityId: ID!) {\n    removeCity(cityId: $cityId) {\n       _id\n      username\n      savedCities {\n        cityId\n        name\n        image\n        healthcare\n        taxation\n        education\n        housing\n        costOfLiving\n        safety\n        environmentalQuality\n        economy\n        population\n        region\n      }\n    }\n  }\n"]))),q=a(14),$=a(15),K=a(218),Y=new(function(){function e(){Object(q.a)(this,e)}return Object($.a)(e,[{key:"getProfile",value:function(){return Object(K.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(K.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),V=a(1),G=function(){var e=Object(l.useState)({username:"",email:"",password:""}),t=Object(y.a)(e,2),a=t[0],n=t[1],i=Object(l.useState)(!1),c=Object(y.a)(i,1)[0],s=Object(l.useState)(!1),r=Object(y.a)(s,2),o=r[0],d=r[1],j=Object(T.a)(P),u=Object(y.a)(j,2),h=u[0],m=u[1].error;Object(l.useEffect)((function(){d(!!m)}),[m]);var O=function(e){var t=e.target,i=t.name,c=t.value;n(Object(b.a)(Object(b.a)({},a),{},Object(L.a)({},i,c)))},x=function(){var e=Object(I.a)(_.a.mark((function e(t){var i,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=4,e.next=7,h({variables:Object(b.a)({},a)});case 7:i=e.sent,c=i.data,Y.login(c.addUser.token),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),d(!0);case 16:n({username:"",email:"",password:""});case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(M.a,{noValidate:!0,validated:c,onSubmit:x,children:[Object(V.jsx)(E.a,{dismissible:!0,onClose:function(){return d(!1)},show:o,variant:"danger",children:"Something went wrong with your signup!"}),Object(V.jsxs)(M.a.Group,{children:[Object(V.jsx)(M.a.Label,{htmlFor:"username",children:"Username"}),Object(V.jsx)(M.a.Control,{type:"text",placeholder:"Your username",name:"username",onChange:O,value:a.username,required:!0}),Object(V.jsx)(M.a.Control.Feedback,{type:"invalid",children:"Username is required!"})]}),Object(V.jsxs)(M.a.Group,{children:[Object(V.jsx)(M.a.Label,{htmlFor:"email",children:"Email"}),Object(V.jsx)(M.a.Control,{type:"email",placeholder:"Your email address",name:"email",onChange:O,value:a.email,required:!0}),Object(V.jsx)(M.a.Control.Feedback,{type:"invalid",children:"Email is required!"})]}),Object(V.jsxs)(M.a.Group,{children:[Object(V.jsx)(M.a.Label,{htmlFor:"password",children:"Password"}),Object(V.jsx)(M.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:O,value:a.password,required:!0}),Object(V.jsx)(M.a.Control.Feedback,{type:"invalid",children:"Password is required!"})]}),Object(V.jsx)(H.a,{className:"mt-10",disabled:!(a.username&&a.email&&a.password),type:"submit",variant:"success",children:"Submit"})]})})},U=function(){var e=Object(l.useState)({email:"",password:""}),t=Object(y.a)(e,2),a=t[0],n=t[1],i=Object(l.useState)(!1),c=Object(y.a)(i,1)[0],s=Object(l.useState)(!1),r=Object(y.a)(s,2),o=r[0],j=r[1],u=Object(T.a)(z),h=Object(y.a)(u,2),m=h[0],O=h[1].error;Object(l.useEffect)((function(){j(!!O)}),[O]);var x=function(e){var t=e.target,i=t.name,c=t.value;n(Object(b.a)(Object(b.a)({},a),{},Object(L.a)({},i,c)))},g=function(){var e=Object(I.a)(_.a.mark((function e(t){var i,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,m({variables:Object(b.a)({},a)});case 6:i=e.sent,c=i.data,Y.login(c.login.token),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),j(!0);case 15:n({username:"",email:"",password:""});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)(d.a.Fragment,{children:Object(V.jsxs)(M.a,{noValidate:!0,validated:c,onSubmit:g,className:"p-3",children:[Object(V.jsx)(E.a,{dismissible:!0,onClose:function(){return j(!1)},show:o,variant:"danger",children:"Error: Login credentials are incorrect."}),Object(V.jsxs)(M.a.Group,{children:[Object(V.jsx)(M.a.Label,{htmlFor:"email",children:"Email"}),Object(V.jsx)(M.a.Control,{type:"text",placeholder:"Enter your email",name:"email",onChange:x,value:a.email,required:!0}),Object(V.jsx)(M.a.Control.Feedback,{type:"invalid",children:"Error: Email is required."})]}),Object(V.jsxs)(M.a.Group,{children:[Object(V.jsx)(M.a.Label,{htmlFor:"password",children:"Password"}),Object(V.jsx)(M.a.Control,{type:"password",placeholder:"Enter your password",name:"password",onChange:x,value:a.password,required:!0}),Object(V.jsx)(M.a.Control.Feedback,{type:"invalid",children:"Error: Password is required."})]}),Object(V.jsx)(H.a,{className:"mt-10",disabled:!(a.email&&a.password),type:"submit",variant:"success",children:"Submit"})]})})},W=a(76),J=a(74),R=function(){var e=Object(l.useState)(!1),t=Object(y.a)(e,2),a=t[0],n=t[1];return Object(V.jsxs)(d.a.Fragment,{children:[Object(V.jsx)(f.a,{className:"navi p-1",bg:"dark",variant:"dark",expand:"lg",children:Object(V.jsxs)(C.a,{fluid:!0,children:[Object(V.jsx)(f.a.Brand,{as:p.b,to:"/",children:Object(V.jsxs)("span",{className:"mx-3 h2",children:[Object(V.jsx)(J.a,{className:"home-logo",icon:W.d}),"Home City"]})}),Object(V.jsx)(f.a.Toggle,{"aria-controls":"navbar"}),Object(V.jsx)(f.a.Collapse,{id:"navbar",children:Object(V.jsxs)(w.a,{className:"ml-auto",children:[Object(V.jsx)(w.a.Link,{as:p.b,to:"/",children:"Search Cities"}),Y.loggedIn()?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(w.a.Link,{as:p.b,to:"/profile",children:"Profile"}),Object(V.jsx)(w.a.Link,{onClick:Y.logout,as:p.b,to:"/",children:"Logout"})]}):Object(V.jsx)(w.a.Link,{onClick:function(){return n(!0)},children:"Login/Sign Up"})]})})]})}),Object(V.jsx)(k.a,{size:"lg",show:a,onHide:function(){return n(!1)},"aria-labelledby":"signup-modal",children:Object(V.jsxs)(N.a.Container,{defaultActiveKey:"login",children:[Object(V.jsx)(k.a.Header,{closeButton:!0,children:Object(V.jsx)(k.a.Title,{id:"signup-modal",children:"Login"})}),Object(V.jsxs)(k.a.Body,{children:[Object(V.jsxs)(w.a,{variant:"pills",className:"mb-4",children:[Object(V.jsx)(w.a.Item,{children:Object(V.jsx)(w.a.Link,{eventKey:"login",className:"btn-link",children:"Login"})}),Object(V.jsx)(w.a.Item,{children:Object(V.jsx)(w.a.Link,{eventKey:"signup",className:"btn-link",children:"Sign Up"})})]}),Object(V.jsxs)(N.a.Content,{children:[Object(V.jsx)(N.a.Pane,{eventKey:"login",children:Object(V.jsx)(U,{handleModalClose:function(){return n(!1)}})}),Object(V.jsx)(N.a.Pane,{eventKey:"signup",children:Object(V.jsx)(G,{handleModalClose:function(){return n(!1)}})})]})]})]})})]})},X=a(36),Z=a(441),ee=Object(A.a)(o||(o=Object(F.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      cityCount\n      homeCity{\n        cityId\n        name\n        image\n        healthcare\n        taxation\n        education\n        housing\n        costOfLiving\n        safety\n        environmentalQuality\n        economy\n        population\n        region\n      }\n      savedCities {\n        _id\n        cityId\n        name\n        image\n        healthcare\n        taxation\n        education\n        housing\n        costOfLiving\n        safety\n        environmentalQuality\n        economy\n        population\n        region\n      }\n    }\n  }\n"]))),te=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},ae=a(427),ne=a(144),ie=a(428),ce=a(445),se=a(442),re=a(449),oe=a(446),le=a(443);var de=a(439),je=function(e){var t=e.headerIcon,a=e.title,n=e.text;return Object(V.jsx)(de.a,{className:"bannerCard",children:Object(V.jsxs)(de.a.Content,{children:[Object(V.jsxs)(de.a.Header,{className:"bannerHeader",children:[a," ",Object(V.jsx)("div",{className:"bannerIcon",children:t})]}),Object(V.jsx)(de.a.Description,{children:n})]})})},ue=a(448),be=a(268),he=a(426),me=function(){return Object(V.jsxs)(ue.a,{children:[Object(V.jsxs)(re.a,{columns:2,relaxed:"very",children:[Object(V.jsxs)(re.a.Column,{children:[Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})})]}),Object(V.jsxs)(re.a.Column,{children:[Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})}),Object(V.jsx)("p",{children:Object(V.jsx)(be.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})})]})]}),Object(V.jsx)(he.a,{vertical:!0,children:"And"})]})},Oe=function(){var e=[{headerIcon:Object(V.jsx)(J.a,{icon:W.e,size:"3x",className:".fa-gradient"}),title:"Search",text:"Your search reports life-quality scores for US cities, across various categories based on a 10-point scoring system."},{headerIcon:Object(V.jsx)(J.a,{icon:W.a,size:"3x"}),title:"Analyze",text:" View your saved city population statistics and quality of life to get an accurate and better view of your potential new home.  "},{headerIcon:Object(V.jsx)(J.a,{icon:W.b,size:"3x"}),title:"Compare",text:" A decision making tool to visually compare each cities cost of living side by side to help find a place called Home."}];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(C.a,{children:Object(V.jsx)("div",{id:"education-cards",className:"row my-5 justify-content-between p-5",children:e.map((function(e,t){return Object(V.jsx)(je,Object(b.a)({},e),t)}))})}),Object(V.jsx)(C.a,{children:Object(V.jsx)(me,{})})]})},xe=function(){var e=Object(l.useState)(!1),t=Object(y.a)(e,2),a=t[0],n=t[1],i=Object(l.useState)(!0),c=Object(y.a)(i,2),s=c[0],r=c[1],o=Object(Z.a)(ee,{}),j=o.loading,u=o.error,b=o.data;console.log(u),console.log(b);var h=Object(l.useState)([]),m=Object(y.a)(h,2),O=m[0],x=m[1],g=Object(l.useState)(""),p=Object(y.a)(g,2),v=p[0],f=p[1],C=Object(l.useState)([]),w=Object(y.a)(C,2),k=w[0],N=w[1];Object(l.useEffect)((function(){var e;if(!j&&(null===b||void 0===b||null===(e=b.me)||void 0===e?void 0:e.savedCities)){var t=b.me.savedCities.map((function(e){return e.cityId}));N(t)}}),[j]);var S=Object(T.a)(Q),L=Object(y.a)(S,2),E=L[0],H=L[1].saveHomeError,F=Object(T.a)(D),A=Object(y.a)(F,1)[0],z=function(e){var t=e.suggestions,a=e.searchInput,n=e.onSelectSuggestion,i=e.displaySuggestions,c=e.selectedSuggestion,s=e.onKeyDown;return a&&i?t.length>0?Object(V.jsx)("ul",{className:"suggestions-list",children:t.map((function(e,t){var a="suggestion ".concat(c===t?"selected":"");return Object(V.jsx)("li",{tabIndex:0,className:a,onClick:function(){return n(t)},onKeyDown:s,children:e},t)}))}):Object(V.jsxs)("div",{className:"no-suggestions",children:[" ",Object(V.jsx)(J.a,{icon:W.c}),"\xa0\xa0No suggestions available"]}):Object(V.jsx)(V.Fragment,{})},P=d.a.useState([]),B=Object(y.a)(P,2),q=B[0],$=B[1],K=d.a.useState(0),G=Object(y.a)(K,2),U=G[0],R=G[1],de=d.a.useState(!1),je=Object(y.a)(de,2),ue=je[0],be=je[1],he=["New York, New York","Los Angeles, California","Chicago, Illinois","Houston, Texas","Phoenix, Arizona","Philadelphia, Pennsylvania","San Antonio, Texas","San Diego, California","Dallas, Texas","San Jose, California","Austin, Texas","Jacksonville, Florida","Fort Worth, Texas","Columbus, Ohio","Charlotte, North Carolina","San Francisco, California","Indianapolis, Indiana","Seattle, Washington","Denver, Colorado","Washington, DC","Boston, Massachusetts","El Paso, Texas","Nashville-Davidson, Tennessee","Detroit, Michigan","Oklahoma City, Oklahoma","Portland, Oregon","Las Vegas, Nevada","Memphis, Tennessee","Louisville-Jefferson County, Kentucky","Baltimore, Maryland","Milwaukee, Wisconsin","Albuquerque, N.M.","Tucson, Arizona","Fresno, California","Mesa, Arizona","Sacramento, California","Atlanta, Georgia","Kansas City, Missouri","Colorado Springs, Colorado","Omaha, Nebraska","Raleigh, North Carolina","Miami, Florida","Long Beach, California","Virginia Beach, Virginia","Oakland, California","Minneapolis, Minnesota","Tulsa, Oklahoma","Tampa, Florida","Arlington, Texas","New Orleans, Louisiana"],me=function(){var e=Object(I.a)(_.a.mark((function e(t){var a,i,c,s,o,l,d,j,u,b;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch("https://api.teleport.org/api/cities/?search=".concat(v,"&limit=1&embed=city%3Asearch-results%2Fcity%3Aitem%2Fcity%3Aurban_area%2Fua%3Ascores"));case 6:if((a=e.sent).ok){e.next=9;break}throw new Error("something went wrong!");case 9:return e.next=11,a.json();case 11:if(i=e.sent,c=i._embedded["city:search-results"],console.log(c),s=c[0]._embedded["city:item"].population,c[0].population=te(s),void 0!==c[0]._embedded["city:item"]._embedded){e.next=21;break}r(!1),f(""),e.next=48;break;case 21:return o=c[0]._embedded["city:item"]._embedded["city:urban_area"]._embedded["ua:scores"].categories,c[0].housing=Math.round(o[0].score_out_of_10),c[0].costOfLiving=Math.round(o[1].score_out_of_10),c[0].safety=Math.round(o[7].score_out_of_10),c[0].healthcare=Math.round(o[8].score_out_of_10),c[0].education=Math.round(o[9].score_out_of_10),c[0].environmentalQuality=Math.round(o[10].score_out_of_10),c[0].economy=Math.round(o[11].score_out_of_10),c[0].taxation=Math.round(o[12].score_out_of_10),c[0].cityId=c[0]._embedded["city:item"].geoname_id,l=c[0]._embedded["city:item"]._embedded["city:urban_area"]._links["ua:images"].href,e.next=34,fetch("".concat(l));case 34:if((d=e.sent).ok){e.next=37;break}throw new Error("something went wrong!");case 37:return e.next=39,d.json();case 39:j=e.sent,u=j.photos[0].image.web,c[0].image=u,b=c[0]._embedded["city:item"]._embedded["city:urban_area"].full_name,c[0].region=b,r(!0),n(!0),x(c),f("");case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(3),console.error(e.t0);case 53:case"end":return e.stop()}}),e,null,[[3,50]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(e,t){return null!==e&&e.name===t.matching_full_name},ge=function(){var e=Object(I.a)(_.a.mark((function e(t){var a,n,i,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O.find((function(e){return e.cityId===t})),Y.loggedIn()?Y.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,n={cityId:a._embedded["city:item"].geoname_id,name:a.matching_full_name,healthcare:a.healthcare,taxation:a.taxation,education:a.education,costOfLiving:a.costOfLiving,housing:a.housing,safety:a.safety,environmentalQuality:a.environmentalQuality,economy:a.economy,image:a.image,region:a.region,population:parseInt(a.population.replace(/,/g,""),10)},console.log(n),e.next=9,E({variables:{homeCity:n}});case 9:if(i=e.sent,console.log("save home error",H),i.data){e.next=13;break}throw new Error("something went wrong!");case 13:(c=document.getElementById("saveHomeCityBtn")).innerHTML="City is your Home City",c.setAttribute("disabled",!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(I.a)(_.a.mark((function e(t){var a,n,i,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O.find((function(e){return e.cityId===t})),Y.loggedIn()?Y.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,console.log(a),n={cityId:a._embedded["city:item"].geoname_id,name:a.matching_full_name,healthcare:a.healthcare,taxation:a.taxation,education:a.education,costOfLiving:a.costOfLiving,housing:a.housing,safety:a.safety,environmentalQuality:a.environmentalQuality,economy:a.economy,image:a.image,region:a.region,population:parseInt(a.population.replace(/,/g,""),10)},e.next=9,A({variables:{city:n}});case 9:if(i=e.sent,console.log(A),i.data){e.next=13;break}throw new Error("something went wrong!");case 13:N([].concat(Object(X.a)(k),[n.cityId])),(c=document.getElementById("saveCityBtn")).innerHTML="This city has already been saved!",c.setAttribute("disabled",!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ae.a,{fluid:!0,className:"text-light jumboGrad home-search",children:Object(V.jsx)(ie.a,{style:{width:"70rem"},className:"p-5 jumbo",children:Object(V.jsxs)(M.a,{className:"p-5",onSubmit:me,children:[Object(V.jsxs)("h1",{className:"text-center font-normal",children:["Search for your future ",Object(V.jsx)("span",{className:"home-city",children:"home city"})]}),Object(V.jsxs)(M.a.Row,{children:[Object(V.jsx)(M.a.Label,{className:"text-left display-block",children:"City, State "}),Object(V.jsxs)("div",{className:"input-group",children:[Object(V.jsx)(M.a.Control,{size:"lg",className:"user-input form-control-large",type:"text",onChange:function(e){var t=e.target.value;f(t);var a=he.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())}));$(a),be(!0)},value:v,placeholder:"Enter city name"}),Object(V.jsx)(z,{onBlur:function(){return alert("blur"),be(!1)},searchInput:v,selectedSuggestion:U,onSelectSuggestion:function(e){R(e),f(q[e]),$([]),be(!1)},displaySuggestions:ue,suggestions:q}),Object(V.jsxs)(ce.a,{light:"true",type:"submit",children:[Object(V.jsx)(J.a,{icon:W.e}),Object(V.jsx)("span",{children:"\xa0\xa0Search"})]})]})]})]})})}),Object(V.jsx)(ie.a,{className:"p-5",children:s?O.map((function(e){return Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"header-row",children:[Object(V.jsxs)("div",{children:[Object(V.jsx)("h2",{children:e.matching_full_name}),Object(V.jsxs)("h3",{children:["Region ",e.region]})]}),Y.loggedIn()?Object(V.jsx)("div",{}):Object(V.jsx)("div",{className:"sign-info",children:Object(V.jsx)(se.a,{info:!0,content:"Sign up or login using the link in the header for the ability to create a profile page and save cities to compare."})}),Object(V.jsxs)("div",{className:"mb-4",children:[Y.loggedIn()&&Object(V.jsx)(ce.a,{primary:!0,disabled:k.includes(e.cityId+"")||k.includes(e.cityId),className:"btn-block btn-info",id:"saveCityBtn",onClick:function(){return pe(e.cityId)},children:k.includes(e.cityId+"")||k.includes(e.cityId)?"City has been saved":"Save this City"}),Y.loggedIn()&&!j&&void 0===u&&Object(V.jsx)(ce.a,{disabled:xe(b.me.homeCity,e),id:"saveHomeCityBtn",primary:!0,onClick:function(){return ge(e.cityId)},children:xe(b.me.homeCity,e)?"City is your Home City":"Set as Home City"})]})]}),Object(V.jsxs)(re.a,{className:"mb-4 mt-4 body-row",stackable:!0,columns:2,children:[Object(V.jsxs)(re.a.Column,{className:"image-cropper",children:[Object(V.jsx)("img",{src:e.image,className:"city-pic",alt:"img not found"}),Object(V.jsxs)(oe.a,{size:"small",children:[Object(V.jsx)(oe.a.Label,{children:"Population"}),Object(V.jsx)(oe.a.Value,{children:e.population})]})]}),Object(V.jsxs)(re.a.Column,{children:[Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Healthcare "}),Object(V.jsx)(le.a,{size:"small",color:"red",value:e.healthcare,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Taxation "}),Object(V.jsx)(le.a,{size:"small",color:"blue",value:e.taxation,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Education "}),Object(V.jsx)(le.a,{size:"small",color:"purple",value:e.education,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Housing "}),Object(V.jsx)(le.a,{size:"small",color:"yellow",value:e.housing,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Cost of Living "}),Object(V.jsx)(le.a,{size:"small",color:"teal",value:e.costOfLiving,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Safety "}),Object(V.jsx)(le.a,{size:"small",color:"orange",value:e.safety,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Environmental Quality "}),Object(V.jsx)(le.a,{size:"small",color:"violet",value:e.environmentalQuality,total:"10",progress:"ratio"})]}),Object(V.jsxs)("div",{className:"stats",children:[Object(V.jsx)("span",{className:"bold",children:"Economy "}),Object(V.jsx)(le.a,{size:"small",color:"green",value:e.economy,total:"10",progress:"ratio"})]})]})]}),Object(V.jsx)(ie.a,{className:"mt-4 mb-4",children:Object(V.jsx)("div",{className:"mt-4",children:Object(V.jsx)(ne.a,{data:{labels:["Healthcare","Taxation","Education","Housing","Living","Safety","Environment","Economy"],datasets:[{label:"Score",data:["".concat(e.healthcare),"".concat(e.taxation),"".concat(e.education),"".concat(e.housing),"".concat(e.costOfLiving),"".concat(e.safety),"".concat(e.environmentalQuality),"".concat(e.economy)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},height:400,width:500,options:{plugins:{legend:{display:!1}},maintainAspectRatio:!1,scales:{y:{suggestedMin:0,suggestedMax:10}}}})})})]},e.matching_full_name)})):Object(V.jsxs)(se.a,{negative:!0,children:[Object(V.jsx)(se.a.Header,{children:"No cities found"}),Object(V.jsx)("p",{children:"Try searching for a different city."})]})}),!a&&Object(V.jsx)(Oe,{})]})},ge=function(){return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(xe,{})})},pe=a(430),ve=a(260),ye=a(96),fe=function(e){var t=localStorage.getItem("saved_cities")?JSON.parse(localStorage.getItem("saved_cities")):null;if(!t)return!1;var a=null===t||void 0===t?void 0:t.filter((function(t){return t!==e}));return localStorage.setItem("saved_cities",JSON.stringify(a)),!0},Ce=a(429),we=a(432),ke=function(){var e,t,a=Object(l.useState)([]),n=Object(y.a)(a,2),i=n[0],c=n[1],s=Object(Z.a)(ee),r=s.loading,o=s.data,d=(null===o||void 0===o?void 0:o.me)||[];return r?Object(V.jsx)("h2",{children:"LOADING..."}):Object(V.jsxs)(C.a,{children:[Object(V.jsx)("h3",{children:(null===(e=d.savedCities)||void 0===e?void 0:e.length)>1?"Select 2 cities to compare. You have ".concat(d.savedCities.length," ").concat(1===d.savedCities.length?"city":"cities"," saved."):"You need at least 2 saved cities to compare."}),Object(V.jsx)(we.a,{className:"mb-10",placeholder:"Saved City",onChange:function(e,t){var a=t.value;c(a)},fluid:!0,multiple:!0,selection:!0,options:null===(t=d.savedCities)||void 0===t?void 0:t.map((function(e){return{key:e._id,value:e._id,text:e.region,disabled:i.length>1}}))}),null===i||void 0===i?void 0:i.map((function(e,t){if(1===i.length){var a=s(i[0]);return a.population=te(a[0].population),a.healthcare=Math.round(a[0].healthcare),a.taxation=Math.round(a[0].taxation),a.education=Math.round(a[0].education),a.housing=Math.round(a[0].housing),a.costOfLiving=Math.round(a[0].costOfLiving),a.safety=Math.round(a[0].safety),a.environmentalQuality=Math.round(a[0].environmentalQuality),a.economy=Math.round(a[0].economy),Object(V.jsxs)(Ce.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"City"}),Object(V.jsx)("th",{children:a[0].region})]})}),Object(V.jsxs)("tbody",{children:[Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Population"}),Object(V.jsx)("td",{children:a.population})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Healthcare"}),Object(V.jsx)("td",{children:a.healthcare})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Taxation"}),Object(V.jsx)("td",{children:a.taxation})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Education"}),Object(V.jsx)("td",{children:a.education})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Housing"}),Object(V.jsx)("td",{children:a.housing})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Living"}),Object(V.jsx)("td",{children:a.costOfLiving})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Safety"}),Object(V.jsx)("td",{children:a.safety})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Environment"}),Object(V.jsx)("td",{children:a.environmentalQuality})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Economy"}),Object(V.jsx)("td",{children:a.economy})]})]})]},a[0]._id)}if(2===i.length){var n=s(i[0]),c=s(i[1]);if(n.population=te(n[0].population),c.population=te(c[0].population),n.population=te(n[0].population),n.healthcare=Math.round(n[0].healthcare),n.taxation=Math.round(n[0].taxation),n.education=Math.round(n[0].education),n.housing=Math.round(n[0].housing),n.costOfLiving=Math.round(n[0].costOfLiving),n.safety=Math.round(n[0].safety),n.environmentalQuality=Math.round(n[0].environmentalQuality),n.economy=Math.round(n[0].economy),c.population=te(c[0].population),c.healthcare=Math.round(c[0].healthcare),c.taxation=Math.round(c[0].taxation),c.education=Math.round(c[0].education),c.housing=Math.round(c[0].housing),c.costOfLiving=Math.round(c[0].costOfLiving),c.safety=Math.round(c[0].safety),c.environmentalQuality=Math.round(c[0].environmentalQuality),c.economy=Math.round(c[0].economy),1===t)return Object(V.jsxs)(Ce.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"City"}),Object(V.jsx)("th",{children:n[0].name}),Object(V.jsx)("th",{children:c[0].name})]})}),Object(V.jsxs)("tbody",{children:[Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Population"}),Object(V.jsx)("td",{children:n.population}),Object(V.jsx)("td",{children:c.population})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Healthcare"}),Object(V.jsx)("td",{children:n.healthcare}),Object(V.jsx)("td",{children:c.healthcare})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Taxation"}),Object(V.jsx)("td",{children:n.taxation}),Object(V.jsx)("td",{children:c.taxation})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Education"}),Object(V.jsx)("td",{children:n.education}),Object(V.jsx)("td",{children:c.education})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Housing"}),Object(V.jsx)("td",{children:n.housing}),Object(V.jsx)("td",{children:c.housing})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Living"}),Object(V.jsx)("td",{children:n.costOfLiving}),Object(V.jsx)("td",{children:c.costOfLiving})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Safety"}),Object(V.jsx)("td",{children:n.safety}),Object(V.jsx)("td",{children:c.safety})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Environment"}),Object(V.jsx)("td",{children:n.environmentalQuality}),Object(V.jsx)("td",{children:c.environmentalQuality})]}),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"Economy"}),Object(V.jsx)("td",{children:n.economy}),Object(V.jsx)("td",{children:c.economy})]})]})]},n[0]._id)}function s(e){var t;return null===(t=d.savedCities)||void 0===t?void 0:t.filter((function(t){return t._id===e}))}}))]})},Ne=a(137),Se=(a.p,function(){var e=Object(Z.a)(ee,{fetchPolicy:"network-only"}),t=e.loading,a=e.data;console.log(a);var n=Object(T.a)(B),i=Object(y.a)(n,1)[0],c=(null===a||void 0===a?void 0:a.me)||{};if(console.log(c),!(null===c||void 0===c?void 0:c.username))return Object(V.jsx)("div",{className:"p-5",children:Object(V.jsxs)(se.a,{negative:!0,children:[Object(V.jsx)(se.a.Header,{children:"Additional privileges needed in order to view this page"}),Object(V.jsx)("p",{children:"You must to be logged in to view this page. Use navigation links above to sign up or log in."})]})});var s=function(){var e=Object(I.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y.loggedIn()?Y.getToken():null){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,i({variables:{cityId:t}});case 6:if(e.sent.data){e.next=9;break}throw new Error("something went wrong!");case 9:fe(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(V.jsx)("h2",{children:"LOADING..."}):Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(ae.a,{fluid:!0,className:"m-3",children:Object(V.jsxs)(pe.a,{children:[Object(V.jsx)(ve.a,{className:"mb-2 mt-3 about-me",sm:12,md:5,children:Object(V.jsxs)(C.a,{children:[Object(V.jsxs)(de.a,{fluid:!0,children:[Object(V.jsxs)(de.a.Content,{className:"text-left",children:[Object(V.jsx)(de.a.Header,{className:"mb-2",children:Object(V.jsx)("h1",{children:a.me.username})}),Object(V.jsx)(de.a.Meta,{className:"mb-3",children:a.me.email}),Object(V.jsx)(de.a.Meta,{className:"mb-3",children:a.me.homeCity&&Object(V.jsxs)("h3",{children:[a.me.username," is currently living in ",a.me.homeCity.name.split(",")[0],"."]})})]}),Object(V.jsx)(de.a.Content,{extra:!0,children:Object(V.jsxs)("div",{className:"display-flex align-center ",children:[Object(V.jsx)(Ne.a,{disabled:!0,name:"building",size:"large"}),Object(V.jsxs)("span",{children:[a.me.savedCities.length,"\xa0",1===a.me.savedCities.length?"city":"cities"," saved"]})]})}),a.me.homeCity&&Object(V.jsx)(de.a.Content,{extra:!0,children:Object(V.jsxs)("div",{className:"display-flex align-center mb-4",children:[Object(V.jsx)(Ne.a,{disabled:!0,name:"home",size:"large"}),Object(V.jsx)("span",{children:a.me.homeCity.name})]})})]}),a.me.homeCity?Object(V.jsxs)(de.a,{fluid:!0,className:"mb-4",children:[Object(V.jsx)(be.a,{src:a.me.homeCity.image,wrapped:!0,ui:!1}),Object(V.jsxs)(de.a.Content,{children:[Object(V.jsx)(de.a.Meta,{className:"mb-2",children:"Home City"}),Object(V.jsx)(de.a.Header,{className:"mb-4",children:a.me.homeCity.region}),Object(V.jsx)(de.a.Description,{children:Object(V.jsxs)(oe.a,{size:"tiny",children:[Object(V.jsx)(oe.a.Label,{children:"Population"}),Object(V.jsx)(oe.a.Value,{className:"population mb-3",children:te(a.me.homeCity.population)})]})}),Object(V.jsx)(ne.a,{data:{labels:["Healthcare","Taxation","Education","Housing","Living","Safety","Environment","Economy"],datasets:[{label:"Score",data:["".concat(a.me.homeCity.healthcare),"".concat(a.me.homeCity.taxation),"".concat(a.me.homeCity.education),"".concat(a.me.homeCity.housing),"".concat(a.me.homeCity.costOfLiving),"".concat(a.me.homeCity.safety),"".concat(a.me.homeCity.environmentalQuality),"".concat(a.me.homeCity.economy)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},height:70,width:200,options:{plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!0,scales:{y:{suggestedMin:0,suggestedMax:5}}}})]})]}):Object(V.jsx)(p.b,{to:"/",children:Object(V.jsx)(H.a,{variant:"danger",children:"Search for your home city"})})]})}),Object(V.jsxs)(ve.a,{sm:12,md:7,className:"mt-3",children:[Object(V.jsxs)(C.a,{className:"scores",children:[Object(V.jsx)("h2",{children:" City Compare"}),Object(V.jsx)(ke,{})]}),Object(V.jsxs)(C.a,{className:"data",children:[" ",Object(V.jsxs)("h2",{children:[c.cityCount>0?"Your ".concat(c.cityCount," Saved Cities!"):"You have 0 saved cities."," "]})," "]}),Object(V.jsx)(C.a,{className:"scores",children:Object(V.jsx)(N.a.Container,{className:"",sm:12,id:"left-tabs-example",children:Object(V.jsxs)(pe.a,{children:[Object(V.jsx)(ve.a,{sm:12,children:Object(V.jsx)(N.a.Content,{children:c.savedCities.map((function(e){return Object(V.jsxs)(N.a.Pane,{eventKey:e.cityId,transition:ye.a,children:[Object(V.jsx)(pe.a,{className:"CityChartName",children:Object(V.jsxs)("h3",{children:[e.name,Object(V.jsx)(H.a,{variant:"outline-danger delete",size:"sm",onClick:function(){return s(e.cityId)},children:"Delete city"})]})}),Object(V.jsx)(ne.a,{className:"mb-3",data:{labels:["Healthcare","Taxation","Education","Housing","Living","Safety","Environment","Economy"],datasets:[{label:"Score",data:["".concat(e.healthcare),"".concat(e.taxation),"".concat(e.education),"".concat(e.housing),"".concat(e.costOfLiving),"".concat(e.safety),"".concat(e.environmentalQuality),"".concat(e.economy)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(255, 159, 64, 0.2)","rgba(223, 141, 243, 0.2)","rgba(82, 255, 94, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(153, 102, 255, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(255, 159, 64, 1)","rgba(223, 141, 243, 1)","rgba(82, 255, 94, 1)"],borderWidth:1}]},height:60,width:200,options:{plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!0,scales:{y:{suggestedMin:0,suggestedMax:5}}}})]})}))})}),Object(V.jsx)(ve.a,{sm:12,className:"display-flex flex-wrap",children:c.savedCities.map((function(e){return Object(V.jsx)(w.a,{defaultActiveKey:e.cityId,variant:"pills",children:Object(V.jsx)(w.a.Item,{children:Object(V.jsxs)(w.a.Link,{className:"p-2 pb-2",eventKey:e.cityId,children:[" ",e.region]})})},e.cityId)}))})]})})})]})]})})})}),_e=function(){return Object(V.jsx)("footer",{children:"\xa9 2021 Home City"})},Ie=Object(h.a)({uri:"/graphql"}),Le=Object(g.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(b.a)(Object(b.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),Me=new m.a({link:Le.concat(Ie),cache:new O.a});var Ee=function(){return Object(V.jsx)(x.a,{client:Me,children:Object(V.jsx)(p.a,{children:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(R,{}),Object(V.jsxs)(v.c,{children:[Object(V.jsx)(v.a,{exact:!0,path:"/",component:ge}),Object(V.jsx)(v.a,{exact:!0,path:"/profile",component:Se}),Object(V.jsx)(v.a,{render:function(){return Object(V.jsx)("h1",{className:"display-2",children:"Wrong page!"})}})]}),Object(V.jsx)(_e,{})]})})})};u.a.render(Object(V.jsx)(Ee,{}),document.getElementById("root"))}},[[407,1,2]]]);
//# sourceMappingURL=main.1a940b90.chunk.js.map